print 'CREATING <%= @ctx[:server_name] %> SERVER';

edit()
startEdit()
cd('/')
cmo.createServer('<%= @ctx[:server_name] %>')
cd('/Servers/<%= @ctx[:server_name] %>')
cmo.setListenAddress("<%= @ctx[:server_address] %>")
cmo.setListenPort("<%= @ctx[:server_port] %>")
activate()
startEdit()
cmo.setListenPortEnabled(<%= @ctx[:server_port_enabled] %>)
cmo.setJavaCompiler('<%= @ctx[:server_java_compiler] %>')
cmo.setClientCertProxyEnabled(<%= @ctx[:server_proxy_enabled] %>)
cmo.setMachine(getMBean('/Machines/<%= @ctx[:machine_name] %>'))
cmo.setCluster('<%= @ctx[:cluster_name] %>')
cd('/Servers/<%= @ctx[:server_name] %>/SSL/<%= @ctx[:server_name] %>')
cmo.setEnabled(<%= @ctx[:server_is_ssl] %>)
activate()
disconnect()
exit()
